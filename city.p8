pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
-- simcity remake
-- gio

mode = 1
-- modes:
-- 0 : title
-- 1 : game
-- 2 : menu

selected_tile = "road"
-->8
-- init and construcors6

function _init()
 start_game()
end

function start_game()
	seed = rnd(64)
	genearte_terrain(seed)
	initialize_ui()
end

function genearte_terrain(seed)
	 -- for each x,y grid space on the map
 	for x=0,15 do
 	 for y=0,12 do
 	  mset(x, y, 64 + rnd(2))
 	 end
 	end
end

function new_cursor()
	cur = {}
	cur.dx = 0
	cur.dy = 0
	cur.x = 0
	cur.y = 0
	cur.cooldown = 0
	return cur
end

function new_palette()
 p = {}
 p[1] = {
 	name="road",
 	sprite=8
 }
 return p
end

function initialize_ui()
	cur = new_cursor()
	palette = new_palette()
end
-->8
-- update loops
function _update()
 if (mode == 0) then
 	update_title()
 elseif (mode == 1) then
 	update_game()
 end
end

function update_title()
	
end

function update_game()
	update_cursor()
end

function update_cursor()
 cooldown = 3
 if cur.cooldown == 0 then
  if (btn(0)) cur.dx -= 1
  if (btn(1)) cur.dx += 1 
  if (btn(2)) cur.dy -= 1
  if (btn(3)) cur.dy += 1
    
  if (0 <= cur.x + cur.dx) 
  and (cur.x + cur.dx < 16) then
  	cur.x += cur.dx
  	cur.dx = 0
   cur.cooldown = cooldown
 	end 
  if (0 <= cur.y + cur.dy) 
  and (cur.y + cur.dy < 16) then
  	cur.y += cur.dy
  	cur.dy = 0
   cur.cooldown = cooldown
 	end 
	else
	 cur.cooldown -= 1
	end
	
	--if (cur.cooldown == 0) then
	 if (btn(4)) then
	 	click_tile(cur.x, cur.y)
	 	cur.cooldown = cooldown
	 end
	--end
end

function click_tile(x,y)



end
-->8
-- drawing loops

function _draw()
	cls()
 if (mode == 0) then
 	draw_title()
 elseif (mode == 1) then
 	draw_game()
 end
end

function draw_title()
	print("title screen")
end

function draw_game()
	-- draw map tiles
 map(0,0,0,0,16,16)
 
 -- draw ui
 draw_ui()
 
 -- draw cursor
 draw_cursor()
end

function draw_ui()
 print(selected_tile, 0, 8*13 + 1)
	print(cur.y, 0, 9*13 + 1)
	
	for x=1,1 do
		spr(palette[x].sprite, 8*x, 8*(14))
	end

end

function draw_cursor()

 spr(0,8*cur.x, 8*cur.y)

end
-->8
--utility functions


__gfx__
77700777000000000000000000000000000000000000000000000000000000006666666666666666000000000000000000000000000000000000000000000000
70000007000000000000000000000000000000000000000000000000000000005555555555556666000000000000000000000000000000000000000000000000
70000007000000000000000000000000000000000000000000000000000000005555555555555666000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000a5a5a5a5a5a55566000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000005555555555555566000000000000000000000000000000000000000000000000
700000070000000000000000000000000000000000000000000000000000000055555555555a5566000000000000000000000000000000000000000000000000
70000007000000000000000000000000000000000000000000000000000000006666666665555566000000000000000000000000000000000000000000000000
777007770000000000000000000000000000000000000000000000000000000066666666655a5566000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000655a556665555566000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000055555555655a5566000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000005555555565555566000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000a55555a5655a5566000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000005555555565555566000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000055555555655a5566000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000006555556665555566000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000655a5566655a5566000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333b3333333b333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3333bbb33b3333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3333bbb3333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
333334333333b3333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333433333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333333b333b33333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
